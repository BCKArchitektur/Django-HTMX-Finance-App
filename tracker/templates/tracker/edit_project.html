{% extends 'tracker/base.html' %}

{% block title %}Edit Project{% endblock %}

{% block content %}
<div class="container mx-auto p-4">
    <h2 class="text-2xl font-semibold mb-4">Edit Project: {{ project.project_name }}</h2>

    <form method="post" action="{% url 'edit_project' project.id %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Save Changes</button>
    </form>

    <h3 class="text-xl font-semibold mt-6">Contracts</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4">
        {% for contract in contracts %}
        <div class="card bg-base-100 shadow-xl p-4">
            <h4 class="text-lg font-semibold">{{ contract.contract_name }}</h4>
            <p>Users: {% for user in contract.user.all %}{{ user.username }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
            <p>Sections: {% for section in contract.section.all %}{{ section.section_name }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
        </div>
        {% endfor %}
    </div>

    <h3 class="text-xl font-semibold mt-6">Add New Contract</h3>
    <form method="post" action="{% url 'edit_project' project.id %}">
        {% csrf_token %}
        {{ contract_form.as_p }}
        <button type="submit" class="btn btn-primary">Add Contract</button>
    </form>
</div>
{% endblock %}
